local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local CoreGui = game:GetService("CoreGui")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

if CoreGui:FindFirstChild("ModernExecutor") then
    CoreGui.ModernExecutor:Destroy()
end

local gui = Instance.new("ScreenGui", CoreGui)
gui.Name = "ModernExecutor"
gui.ResetOnSpawn = false
gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

local mainFrame = Instance.new("Frame", gui)
mainFrame.Size = UDim2.new(0, 320, 0, 220)
mainFrame.Position = UDim2.new(0.5, -160, 0.5, -110)
mainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true
Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 12)

local uiStroke = Instance.new("UIStroke", mainFrame)
uiStroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
uiStroke.Thickness = 2
uiStroke.Color = Color3.fromRGB(80, 80, 100)

local function rainbowStroke(object)
	local stroke = Instance.new("UIStroke", object)
	stroke.Thickness = 2
	stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
	local h = 0
	coroutine.wrap(function()
		while object and object.Parent do
			h = (h + 0.01) % 1
			stroke.Color = Color3.fromHSV(h, 1, 1)
			wait(0.01)
		end
	end)()
end

local function makeToggle(name, pos, scriptURL)
	local frame = Instance.new("Frame", mainFrame)
	frame.Size = UDim2.new(0, 280, 0, 40)
	frame.Position = pos
	frame.BackgroundTransparency = 1

	local button = Instance.new("TextButton", frame)
	button.Size = UDim2.new(1, -50, 1, 0)
	button.Position = UDim2.new(0, 0, 0, 0)
	button.BackgroundColor3 = Color3.fromRGB(35, 35, 40)
	button.Text = name
	button.TextColor3 = Color3.new(1, 1, 1)
	button.Font = Enum.Font.GothamBold
	button.TextSize = 14
	button.AutoButtonColor = false
	Instance.new("UICorner", button).CornerRadius = UDim.new(0, 10)
	rainbowStroke(button)

	local toggle = Instance.new("TextButton", frame)
	toggle.Size = UDim2.new(0, 40, 0, 30)
	toggle.Position = UDim2.new(1, -45, 0.5, -15)
	toggle.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
	toggle.Text = "OFF"
	toggle.TextColor3 = Color3.new(1, 1, 1)
	toggle.Font = Enum.Font.GothamBold
	toggle.TextSize = 12
	Instance.new("UICorner", toggle).CornerRadius = UDim.new(1, 0)

	local enabled = false
	local newGuiObjects = {}

	toggle.MouseButton1Click:Connect(function()
		enabled = not enabled
		if enabled then
			toggle.Text = "ON"
			toggle.BackgroundColor3 = Color3.fromRGB(0, 120, 0)

			local before = {}
			for _, obj in ipairs(CoreGui:GetChildren()) do before[obj] = true end
			for _, obj in ipairs(LocalPlayer.PlayerGui:GetChildren()) do before[obj] = true end

			local success, err = pcall(function()
				loadstring(game:HttpGet(scriptURL))()
			end)

			wait(1)

			for _, obj in ipairs(CoreGui:GetChildren()) do
				if not before[obj] and obj:IsA("ScreenGui") then
					table.insert(newGuiObjects, obj)
				end
			end
			for _, obj in ipairs(LocalPlayer.PlayerGui:GetChildren()) do
				if not before[obj] and obj:IsA("ScreenGui") then
					table.insert(newGuiObjects, obj)
				end
			end

			if not _G._VANZZ_LINK_COPIED then
				_G._VANZZ_LINK_COPIED = true
				setclipboard("https://whatsapp.com/channel/0029Vb5zxsfGE56ocEl4KU2H")
			end

			for _, gui in ipairs(newGuiObjects) do
				for _, label in ipairs(gui:GetDescendants()) do
					if label:IsA("TextLabel") and label.Text then
						if string.find(label.Text, "Aqjua X Dreams X FXLIZ") then
							label.Text = "vanzz Script"
						end
						if string.find(label.Text:lower(), "discord.gg/t5cggjz7") then
							label.Text = "[link diblokir oleh vanzz ðŸ˜Ž]"
						end
					end
				end

				local parentTarget = nil
				for _, child in ipairs(gui:GetDescendants()) do
					if child:IsA("Frame") and #child:GetChildren() >= 2 then
						parentTarget = child
						break
					end
				end
				if not parentTarget then parentTarget = gui end

				local label = Instance.new("TextLabel", parentTarget)
				label.Size = UDim2.new(0, 90, 0, 40)
				label.Position = UDim2.new(0, 10, 0, 10)
				label.BackgroundTransparency = 1
				label.Text = "."
				label.TextColor3 = Color3.fromRGB(255, 255, 255)
				label.Font = Enum.Font.GothamBlack
				label.TextScaled = true
				label.TextStrokeTransparency = 0.3
				label.Name = "VanzzLabel"
			end
		else
			toggle.Text = "OFF"
			toggle.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
			for _, obj in ipairs(newGuiObjects) do
				if obj and obj.Parent then
					obj:Destroy()
				end
			end
			newGuiObjects = {}
		end
	end)

	button.MouseButton1Click:Connect(function()
		toggle:MouseButton1Click()
	end)
end

makeToggle("ðŸ§  OP STEAL BRAINROT", UDim2.new(0, 20, 0, 30),
	"https://raw.githubusercontent.com/Aqjua/Insta-Steal/refs/heads/main/Steal a brainrot")

makeToggle("ðŸ“œ SCRIPT GUI", UDim2.new(0, 20, 0, 85),
	"https://raw.githubusercontent.com/tienkhanh1/spicy/main/Chilli.lua")

local hideBtn = Instance.new("TextButton", mainFrame)
hideBtn.Size = UDim2.new(0, 25, 0, 25)
hideBtn.Position = UDim2.new(1, -30, 0, 5)
hideBtn.Text = "âœ–"
hideBtn.Font = Enum.Font.GothamBold
hideBtn.TextColor3 = Color3.new(1, 1, 1)
hideBtn.BackgroundColor3 = Color3.fromRGB(60, 0, 0)
Instance.new("UICorner", hideBtn).CornerRadius = UDim.new(1, 0)
hideBtn.MouseButton1Click:Connect(function()
	mainFrame.Visible = false
end)

local showBtn = Instance.new("TextButton", gui)
showBtn.Size = UDim2.new(0, 45, 0, 45)
showBtn.Position = UDim2.new(0, 25, 0.5, -22)
showBtn.Text = "ðŸ”¥"
showBtn.TextSize = 26
showBtn.Font = Enum.Font.GothamBold
showBtn.BackgroundColor3 = Color3.fromRGB(255, 85, 0)
showBtn.TextColor3 = Color3.new(1, 1, 1)
Instance.new("UICorner", showBtn).CornerRadius = UDim.new(1, 0)
rainbowStroke(showBtn)

local function makeDraggable(frame)
	local dragging, dragInput, dragStart, startPos
	frame.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 then
			dragging = true
			dragStart = input.Position
			startPos = frame.Position
			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragging = false
				end
			end)
		end
	end)

	frame.InputChanged:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseMovement then
			dragInput = input
		end
	end)

	UserInputService.InputChanged:Connect(function(input)
		if dragging and input == dragInput then
			local delta = input.Position - dragStart
			frame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X,
				startPos.Y.Scale, startPos.Y.Offset + delta.Y)
		end
	end)
end

makeDraggable(mainFrame)
makeDraggable(showBtn)

-- ðŸ§  Fitur Gabung GUI: Menampilkan jumlah user aktif yang pakai script ini
local function countUsersOnline()
	local counterLabel = Instance.new("TextLabel", mainFrame)
	counterLabel.Size = UDim2.new(0, 280, 0, 20)
	counterLabel.Position = UDim2.new(0, 20, 0, 5)
	counterLabel.BackgroundTransparency = 1
	counterLabel.TextColor3 = Color3.fromRGB(180, 180, 255)
	counterLabel.Font = Enum.Font.GothamBold
	counterLabel.TextSize = 14
	counterLabel.TextXAlignment = Enum.TextXAlignment.Left
	counterLabel.Text = "Online the script: ..."

	local tagValue = Instance.new("BoolValue")
	tagValue.Name = "UsingVanzzScript"
	tagValue.Parent = LocalPlayer

	local function updateCount()
		local count = 0
		for _, player in ipairs(Players:GetPlayers()) do
			if player:FindFirstChild("UsingVanzzScript") then
				count += 1
			end
		end
		counterLabel.Text = "Online the script: " .. tostring(count)
	end

	updateCount()

	Players.PlayerAdded:Connect(function()
		wait(0.5)
		updateCount()
	end)

	Players.PlayerRemoving:Connect(function()
		wait(0.5)
		updateCount()
	end)

	while counterLabel.Parent do
		wait(5)
		updateCount()
	end
end

countUsersOnline()

showBtn.MouseButton1Click:Connect(function()
	mainFrame.Visible = true
end)
